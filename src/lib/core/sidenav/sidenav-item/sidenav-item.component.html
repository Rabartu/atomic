<div *ngIf="item.isRouteString(); then routeNavItem else functionNavItem"></div>

<ng-template #functionNavItem>
    <a class="at-sidenav-button" [ngClass]="item.customClass"
       *ngIf="!item.hasChildren() && item.renderItem"
       mat-list-item mat-ripple (click)="item.route()">
        <mat-icon *ngIf="item.parent && item.parent.collapsible === true && item.icon">{{ item.icon }}</mat-icon>
        <mat-icon *ngIf="!item.parent && item.icon">{{ item.icon }}</mat-icon>
        <span class="sidenav-item-name at-sidenav-fade-in-on-hover">{{ item.name  }}</span>
        <span fxFlex><!-- fill space --></span>
        <span class="at-sidenav-item-badge at-sidenav-fade-in-on-hover" *ngIf="item.badge"
              [style.background-color]="item.badgeColor">{{ item.badge }}</span>
    </a>
</ng-template>


<ng-template #routeNavItem>
    <a class="at-sidenav-button" [ngClass]="item.customClass"
       *ngIf="!item.hasChildren() && item.renderItem"
       mat-list-item mat-ripple
       [routerLink]="[item.route]" routerLinkActive="active">

        <mat-icon *ngIf="item.parent && item.parent.collapsible === true && item.icon">{{ item.icon }}</mat-icon>
        <mat-icon *ngIf="!item.parent && item.icon">{{ item.icon }}</mat-icon>
        <span class="sidenav-item-name at-sidenav-fade-in-on-hover">{{ item.name }}</span>
        <span fxFlex><!-- fill space --></span>
        <span class="at-sidenav-item-badge at-sidenav-fade-in-on-hover" *ngIf="item.badge"
              [style.background-color]="item.badgeColor">{{ item.badge }}</span>
    </a>
</ng-template>

<!--Dropdown item-->
<a class="at-sidenav-button"
   *ngIf="item.hasChildren() && item.renderItem && item.collapsible" mat-list-item mat-ripple
   (click)="toggleAtSidenavItem()" [ngClass]="item.customClass">

    <mat-icon *ngIf="item.parent && item.parent.collapsible === true">{{ item.icon }}</mat-icon>
    <span class="sidenav-item-name at-sidenav-fade-in-on-hover">{{ item.name  }}</span>
    <span fxFlex><!-- fill space --></span>
    <span class="at-sidenav-item-badge at-sidenav-fade-in-on-hover" *ngIf="item.badge"
          [style.background-color]="item.badgeColor"
          style="margin-right: 12px;">{{ item.badge }}</span>
    <mat-icon *ngIf="item.hasChildren()" class="at-sidenav-item-dropdown-indicator at-sidenav-fade-in-on-hover">
        expand_more
    </mat-icon>
</a>

<h3 matSubheader
    *ngIf="item.hasChildren() && item.renderItem && !item.collapsible"
    class="at-tuc at-ml-10 at-no-m" style="padding-bottom: 0">{{ item.name }}</h3>

<mat-nav-list *ngIf="renderSubNav(item.children)"
              class="at-sidenav-list sidenav-list-nested"
              fxLayout="column">
    <ng-container *ngFor="let child of item.children">
        <at-sidenav-item [class.at-sidenav-list-non-collapsible]="item.collapsible === false"
                         *ngIf="renderItem(child)" [item]="child"></at-sidenav-item>
    </ng-container>
</mat-nav-list>
